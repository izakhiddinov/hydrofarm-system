üê≥ Docker ‚Äî HydroFarm System
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü–∞–ø–∫–∞ docker/ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ Docker:

* üì® Mosquitto ‚Äî MQTT-–±—Ä–æ–∫–µ—Ä (–ø—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö –æ—Ç ESP32)

* üóÑ PostgreSQL ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

* ‚öôÔ∏è Backend ‚Äî Python-—Å–µ—Ä–≤–∏—Å (API + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö)

‚ö†Ô∏è Docker –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ GitHub
GitHub ‚Äî —ç—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞
Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ Raspberry Pi –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–µ

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ docker/
```
docker/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ
‚îú‚îÄ‚îÄ mosquitto/
‚îÇ   ‚îú‚îÄ‚îÄ mosquitto.conf
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ
‚îî‚îÄ‚îÄ postgres/
    ‚îú‚îÄ‚îÄ init.sql
    ‚îú‚îÄ‚îÄ postgresql.conf
    ‚îú‚îÄ‚îÄ pg_hba.conf
    ‚îî‚îÄ‚îÄ README.md
```

üß± Docker-—Å–µ—Ä–≤–∏—Å—ã
```
| –°–µ—Ä–≤–∏—Å      | –ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞        | –•–æ—Å—Ç –≤–Ω—É—Ç—Ä–∏ Docker | –ü–æ—Ä—Ç |
|------------|------------------------|--------------------|------|
| Mosquitto  | hydrofarm-mosquitto   | `mosquitto`        | 1883 |
| PostgreSQL | hydrofarm-postgres    | `postgres`         | 5432 |
| Backend    | hydrofarm-backend     | `backend`          | 8000 |
```

–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç

* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π –ø–æ –∏–º–µ–Ω–∞–º

* Backend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î –∫–∞–∫ postgres:5432

* Backend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MQTT –∫–∞–∫ mosquitto:1883

* ESP32 –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MQTT –ø–æ IP Raspberry Pi

üöÄ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–Ω–∞ Raspberry Pi –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–µ)
1Ô∏è‚É£ –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ GitHub
```
git clone https://github.com/izakhiddinov/hydrofarm-system.git
cd hydrofarm-system/docker
```
üìå hydrofarm-system ‚Äî —ç—Ç–æ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞, –∫–∞–∫ –≤ GitHub

2Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```
docker compose up -d
```
–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:

* —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Mosquitto, PostgreSQL, Backend

* —Å–æ–∑–¥–∞–¥—É—Ç—Å—è volumes –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

* —Å–µ—Ä–≤–∏—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤—è–∂—É—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º

üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
```
docker ps
```
–û–∂–∏–¥–∞–µ–º–æ:

* hydrofarm-mosquitto

* hydrofarm-postgres

* hydrofarm-backend

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
Mosquitto
```
docker logs hydrofarm-mosquitto
```
PostgreSQL
```
docker logs hydrofarm-postgres
```
Backend
```
docker logs hydrofarm-backend
```
üì® MQTT (Mosquitto)
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª:
```
docker/mosquitto/mosquitto.conf
```
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:

* –ø–æ—Ä—Ç 1883

* –∞–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

* –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–ª—è —ç—Ç–∞–ø–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

üîê –ü–æ–∑–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–∞—Ä–æ–ª–∏

–ü—Ä–æ–≤–µ—Ä–∫–∞ MQTT –≤—Ä—É—á–Ω—É—é

–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
docker exec -it hydrofarm-mosquitto \
mosquitto_sub -h localhost -t "#" -v
```
üóÑ PostgreSQL
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–§–∞–π–ª—ã:

* postgresql.conf

* pg_hba.conf

üìå –í–∞–∂–Ω–æ

* –≠—Ç–∏ —Ñ–∞–π–ª—ã –ª–µ–∂–∞—Ç –¥–ª—è –±—É–¥—É—â–µ–π –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏

* –°–µ–π—á–∞—Å –æ–Ω–∏ –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ docker-compose

* –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø–æ–∑–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```
docker exec -it hydrofarm-postgres psql \
-U hydrofarm_user -d hydrofarm
```
üîÅ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```
docker compose down
```
–° —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö:
```
docker compose down -v
```
‚ö†Ô∏è -v —É–¥–∞–ª—è–µ—Ç –í–°–Æ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

üß† –ö–∞–∫ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
```
ESP32 ‚Üí MQTT ‚Üí Mosquitto ‚Üí Backend ‚Üí PostgreSQL ‚Üí Web
```
* ESP32 –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –ë–î

* Backend ‚Äî —Ü–µ–Ω—Ç—Ä –ª–æ–≥–∏–∫–∏

* Web —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Backend API

üìå –í–∞–∂–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

* ‚ùå –ù–ï –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ localhost –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

* ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (mosquitto, postgres)

* –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ docker/ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ GitHub








