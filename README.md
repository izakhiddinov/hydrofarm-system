HydroFarm Docker Setup

–≠—Ç–æ—Ç README –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏ docker/ –∏ —à–∞–≥–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è HydroFarm.

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ docker/

```
docker/
‚îú‚îÄ‚îÄ mosquitto/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Mosquitto MQTT –±—Ä–æ–∫–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ mosquitto.conf    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ –±—Ä–æ–∫–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Mosquitto
‚îú‚îÄ‚îÄ postgres/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ init.sql          # –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ postgresql.conf   # –ö–æ–Ω—Ñ–∏–≥ PostgreSQL (–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è –±—É–¥—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ pg_hba.conf       # –ö–æ–Ω—Ñ–∏–≥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è –±—É–¥—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ PostgreSQL
‚îî‚îÄ‚îÄ docker-compose.yml    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ Mosquitto, PostgreSQL –∏ Backend
```
‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã postgresql.conf –∏ pg_hba.conf –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –Ω–∞–ø—Ä—è–º—É—é. Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

üöÄ –®–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

1Ô∏è‚É£ –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É docker/:
```
cd /–ø—É—Ç—å/–∫/hydrofarm-system/docker
```

2Ô∏è‚É£ –ü–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
```
docker-compose up -d
```
* -d ‚Üí –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ (detached mode).

* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

  * hydrofarm-mosquitto ‚Üí MQTT –±—Ä–æ–∫–µ—Ä, –ø–æ—Ä—Ç 1883

  * hydrofarm-postgres ‚Üí –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL, –ø–æ—Ä—Ç 5432

  * hydrofarm-backend ‚Üí Python backend, –ø–æ—Ä—Ç 8000

3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```
docker-compose ps
```

üìú –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

* Mosquitto:
  ```
  docker logs -f hydrofarm-mosquitto
  ```

* docker logs -f hydrofarm-mosquitto
  ```
  docker logs -f hydrofarm-postgres
  ```

* Backend:
  ```
  docker logs -f hydrofarm-backend
  ```
  üîπ –§–ª–∞–≥ -f –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

‚öôÔ∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–µ–∂–¥—É —Å–æ–±–æ–π
```
| –°–µ—Ä–≤–∏—Å      | –•–æ—Å—Ç (–¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) | –ü–æ—Ä—Ç  |
|------------|-------------------------------|-------|
| Mosquitto  | `mosquitto`                   | 1883  |
| PostgreSQL | `postgres`                    | 5432  |
| Backend    | `backend`                     | 8000  |

```

* Backend –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MQTT_BROKER=mosquitto –∏ POSTGRES_HOST=postgres –∏–∑ docker-compose.yml.

* –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö ESP32 –∏–ª–∏ —Å–µ–Ω—Å–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ backend, –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω—É—Ç—Ä–∏ Docker-—Å–µ—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

* –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Mosquitto –∏ PostgreSQL –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏–ª–∏ volume –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö).

* –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ GitHub, –≤–∫–ª—é—á–∞—è docker-compose.yml –∏ –∫–æ–Ω—Ñ–∏–≥–∏.

* –î–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ volume:
```
docker-compose down -v
```
* docker-compose down -v


