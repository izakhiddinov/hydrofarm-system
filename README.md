üöÄ –ê–ª–≥–æ—Ä–∏—Ç–º –ü–µ—Ä–≤–æ–≥–æ –ó–∞–ø—É—Å–∫–∞ (–ú–∞—Å—Ç–µ—Ä –ù–∞—Å—Ç—Ä–æ–π–∫–∏)
–ö–æ–≥–¥–∞ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ —Å–∏—Å—Ç–µ–º—É, –æ–Ω–∞ –ø—É—Å—Ç–∞. –í–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ ¬´–ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏¬ª. –ó–¥–µ—Å—å –µ—Å—Ç—å –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è:

–°—Ü–µ–Ω–∞—Ä–∏–π –ê: –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –æ—Ç –¢–∞–ª–≥–∞—Ç–∞ (Frontend)
–≠—Ç–æ –∫–æ–≥–¥–∞ –¢–∞–ª–≥–∞—Ç –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ¬ª.

–¢–∞–ª–≥–∞—Ç (JS) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-–∫–æ–º–∞–Ω–¥—É: {"action": "search_new_hardware"}.

–ë—ç–∫–µ–Ω–¥ (Python) —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É Raspberry, –∫–∞–∫–∏–µ –ø–∏–Ω—ã —Å–≤–æ–±–æ–¥–Ω—ã.

–¢–∞–ª–≥–∞—Ç –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–∏–Ω–æ–≤ –∏ –¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±—Ä–∞—Ç—å: ¬´–ö—É–¥–∞ —Ç—ã –≤–æ—Ç–∫–Ω—É–ª –ù–∞—Å–æ—Å ‚Ññ1?¬ª.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, GPIO 17), –∏ –¢–∞–ª–≥–∞—Ç —à–ª–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É: POST /api/setup {"device": "pump", "id": "pump_1", "pin": 17}.

–°—Ü–µ–Ω–∞—Ä–∏–π –ë: –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –æ—Ç Raspberry (Agent)
–≠—Ç–æ –∫–æ–≥–¥–∞ –ê–≥–µ–Ω—Ç —Å–∞–º ¬´—É–≤–∏–¥–µ–ª¬ª –Ω–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –¥–∞—Ç—á–∏–∫ –ø–æ USB/Modbus).

Raspberry (Agent) –ø–∏—à–µ—Ç –ë—ç–∫–µ–Ω–¥—É: ¬´–≠–π, —è –≤–∏–∂—É –Ω–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –∞–¥—Ä–µ—Å–µ Modbus 5!¬ª.

–ë—ç–∫–µ–Ω–¥ —Å–æ–∑–¥–∞–µ—Ç –≤ –±–∞–∑–µ –∑–∞–ø–∏—Å—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º pending (–æ–∂–∏–¥–∞–Ω–∏–µ).

–¢–∞–ª–≥–∞—Ç (UI) –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: ¬´–ù–∞–π–¥–µ–Ω–æ –Ω–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ! –î–∞–π—Ç–µ –µ–º—É –∏–º—è¬ª.

–¢–∞–ª–≥–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ì–ª–∞–≤–Ω—ã–π –ò–Ω–≤–µ—Ä—Ç–æ—Ä"), –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.

üõ†Ô∏è –ß—Ç–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –≤ –∫–æ–¥–µ (–¥–ª—è –¢–∞–ª–≥–∞—Ç–∞)
–¢–∞–ª–≥–∞—Ç, –≤ —Ç–≤–æ–µ–π —á–∞—Å—Ç–∏ (JavaScript) —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

JavaScript

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞
async function setupDevice() {
    const response = await fetch('http://localhost:8000/api/devices/setup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            "device_type": "pump",
            "label": "–ù–∞—Å–æ—Å –ü–æ–ª–∏–≤–∞",
            "pin_number": 17,
            "connection_type": "relay"
        })
    });
    const result = await response.json();
    console.log("–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:", result);
}


## üß† –õ–û–ì–ò–ö–ê –°–ò–°–¢–ï–ú–´ (–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤)

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ ¬´–ü–æ—á—Ç–∞¬ª:
1. **–¢–∞–ª–≥–∞—Ç (Frontend)** –ø–∏—à–µ—Ç –ø–∏—Å—å–º–æ: "–í–∫–ª—é—á–∏ –ù–∞—Å–æ—Å 1" –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ API.
2. **–ë—ç–∫–µ–Ω–¥** –∫–ª–∞–¥–µ—Ç —ç—Ç–æ –ø–∏—Å—å–º–æ –≤ —è—â–∏–∫ (–ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö).
3. **–ê–≥–µ–Ω—Ç (Raspberry Pi)** –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã –∑–∞–≥–ª—è–¥—ã–≤–∞–µ—Ç –≤ —è—â–∏–∫, –≤–∏–¥–∏—Ç –ø–∏—Å—å–º–æ –∏ –¥–µ—Ä–≥–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç (GPIO).

### üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¢–∞–ª–≥–∞—Ç–∞ (Frontend API)

–ß—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Å—Ç–µ–º–æ–π –∏–∑ JavaScript (index.html), –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ –∞–¥—Ä–µ—Å–∞:

* **–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ:** `GET http://localhost:8000/api/data`
* **–î–æ–±–∞–≤–∏—Ç—å/–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:** `POST http://localhost:8000/api/devices/setup`
    * *JSON —Ç–µ–ª–æ:* `{"id": "pump_1", "pin_number": 17, "connection_type": "relay"}`
* **–í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å:** `POST http://localhost:8000/api/command?device_id=pump_1&command=PUMP_ON`

### ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ (Active LOW)
**–í–ê–ñ–ù–û:** –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–ª–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è ¬´–º–∏–Ω—É—Å–æ–º¬ª.
- –ö–æ–º–∞–Ω–¥–∞ **ON** = –°–∏–≥–Ω–∞–ª `LOW` (0 –≤–æ–ª—å—Ç).
- –ö–æ–º–∞–Ω–¥–∞ **OFF** = –°–∏–≥–Ω–∞–ª `HIGH` (3.3 –≤–æ–ª—å—Ç–∞).